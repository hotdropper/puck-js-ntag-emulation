require("Storage").write("NfcLogger.js", `'use strict';String.prototype.padStart||(String.prototype.padStart=function a(c,b){return c>>=0,b=String(b!==void 0?b:' '),this.length>c?String(this):(c-=this.length,c>b.length&&(b+=b.repeat(c/b.length)),b.slice(0,c)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function a(c,b){return c>>=0,b=String(b!==void 0?b:' '),this.length>c?String(this):(c-=this.length,c>b.length&&(b+=b.repeat(c/b.length)),String(this)+b.slice(0,c))});var MAX_ELEMENTS_PER_ROW=16,TABLE_PAD_MIDDLE=MAX_ELEMENTS_PER_ROW*3+2,TABLE_PAD_END=15,annotations={};class NfcLogr{static attach(a){NfcLogr.tracking=!1,NfcLogr.monitorInterval=null,NfcLogr.dispatcherRunning=!1,NfcLogr.count=0,NfcLogr.lastCount=0,NfcLogr.log=[],NfcLogr.recentlyCommunicated=!1,NfcLogr.oldNfcSend=a.nfcSend,NfcLogr.heldResponses=[],a.nfcSend=function(b){NfcLogr.oldNfcSend.call(a,b),NfcLogr.recentlyCommunicated=!0,NfcLogr.heldResponses.push({type:'tx',data:b})},a.on('NFCrx',function(a){return NfcLogr._receive(a)})}static _receive(a){this.recentlyCommunicated=!0,this.log.push({type:'rx',data:a}),this.heldResponses.length>0&&this.log.push(this.heldResponses.shift()),this.count++}static stop(){this.tracking=!1,clearInterval(this.monitorInterval),this.monitorInterval=null}static start(b){var a=this;if(this.monitorInterval)return;this.tracking=!0,this.monitorInterval=setInterval(function(){a._monitor()},b||5e3)}static _monitor(){var a=this;if(this.dispatcherRunning===!0||this.tracking===!1||this.count===this.lastCount)return;if(this.recentlyCommunicated){this.recentlyCommunicated=!1;return}this.dispatcherRunning=!0,this._printLogHeading(),this.log.forEach(function(b){a._printLogEntry(b)}),this.log=[],this.lastCount=this.count,this.dispatcherRunning=!1}static _printLogHeading(){var a=' Src |';a+=' Data '.padEnd(TABLE_PAD_MIDDLE,' ')+'|',a+=' Annotation',console.log(a),console.log('-'.repeat(5)+'|'+'-'.repeat(TABLE_PAD_MIDDLE)+'|'+'-'.repeat(TABLE_PAD_END))}static _printLogEntry(a){a.data||(a.data=[10]);var c=a.type==='rx'?' Rdr | ':' Tag | ';for(var b=0;b<a.data.length;b+=MAX_ELEMENTS_PER_ROW){var d=[];a.data instanceof Uint8Array?d=new Uint8Array(a.data.buffer,b,MAX_ELEMENTS_PER_ROW):a.data instanceof Array?d=a.data.slice(b,MAX_ELEMENTS_PER_ROW):d=[a.data.toString()];var e=(' '+d.map(function(a){return parseInt(a).toString(16)}).join(' ')+' ').replace(/ ([0-9a-zA-Z]) /g,'0$1').padEnd(TABLE_PAD_MIDDLE)+' |';b===0&&annotations[a.data[0]]?c+=e+' '+annotations[a.data[0]]:b>0?c+=' '.repeat(5)+'| '+e+'\\n':c+=e+'\\n'}console.log(' '+c.trim())}}exports=NfcLogr`);