function b(a){this.i2c=a;this.addr=72;this.gain=2048}var d={6144:0,4096:512,2048:1024,1024:1536,512:2048,256:2560},f={"0,1":0,"0,3":4096,"1,3":8192,"2,3":12288};b.prototype.writeRegister=function(a,b){this.i2c.writeTo(this.addr,a,b>>8,b)};b.prototype.readRegister=function(a){this.i2c.writeTo(this.addr,a);a=this.i2c.readFrom(this.addr,2);return a[0]<<8|a[1]};b.prototype.setAddr=function(a){this.addr=a};b.prototype.setGain=function(a){if(!(a in d))throw Error("Gain "+a+" not found");this.gain=
a};b.prototype.getADC=function(a,b){var c=387;if("number"==typeof a)c|=[16384,20480,24576,28672][a];else{var e=f[a];if("undefined"===typeof e)throw Error("Invalid differential channelSpec "+a);c|=e}c|=d[this.gain];this.writeRegister(1,c|32768);var g=this;setTimeout(function(){var a=g.readRegister(0);a&32768&&(a-=65536);b(a)},8)};b.prototype.getADCVoltage=function(a,b){var c=this.gain/32768E3;this.getADC(a,function(a){b(a*c)})};exports.connect=function(a){return new b(a)}