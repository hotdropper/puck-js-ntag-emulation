function d(e){this.addr=57;this.i2c=e;if(171!=this.r(a.ID))throw"APDS9960 not found ("+this.r(a.ID)+")";this.w(a.ENABLE,0);this.w(a.ATIME,b.ATIME);this.w(a.WTIME,b.WTIME);this.w(a.PPULSE,b.PROX_PPULSE);this.w(a.POFFSET_UR,b.POFFSET_UR);this.w(a.POFFSET_DL,b.POFFSET_DL);this.w(a.CONFIG1,b.CONFIG1);this.w(a.CONTROL,b.LDRIVE<<6|b.PGAIN<<2|b.AGAIN);this.w(a.PILT,b.PILT);this.w(a.PIHT,b.PIHT);this.w(a.AILTL,b.AILT&255);this.w(a.AILTH,b.AILT>>8);this.w(a.AIHTL,b.AIHT&255);this.w(a.AIHTH,b.AIHT>>
8);this.w(a.PERS,b.PERS);this.w(a.CONFIG2,b.CONFIG2);this.w(a.CONFIG3,b.CONFIG3);this.w(a.GPENTH,b.GPENTH);this.w(a.GEXTH,b.GEXTH);this.w(a.GCONF1,b.GCONF1);this.w(a.GCONF2,b.GGAIN<<5|b.GLDRIVE<<3|b.GWTIME);this.w(a.GOFFSET_U,b.GOFFSET);this.w(a.GOFFSET_D,b.GOFFSET);this.w(a.GOFFSET_L,b.GOFFSET);this.w(a.GOFFSET_R,b.GOFFSET);this.w(a.GPULSE,b.GPULSE);this.w(a.GCONF3,b.GCONF3);this.w(a.GCONF4,this.r(a.GCONF4)&253|b.GIEN<<1);this.w(a.ENABLE,127)}var a={ENABLE:128,ATIME:129,WTIME:131,AILTL:132,AILTH:133,
AIHTL:134,AIHTH:135,PILT:137,PIHT:139,PERS:140,CONFIG1:141,PPULSE:142,CONTROL:143,CONFIG2:144,ID:146,STATUS:147,CDATAL:148,CDATAH:149,RDATAL:150,RDATAH:151,GDATAL:152,GDATAH:153,BDATAL:154,BDATAH:155,PDATA:156,POFFSET_UR:157,POFFSET_DL:158,CONFIG3:159,GPENTH:160,GEXTH:161,GCONF1:162,GCONF2:163,GOFFSET_U:164,GOFFSET_D:165,GOFFSET_L:167,GOFFSET_R:169,GPULSE:166,GCONF3:170,GCONF4:171,GFLVL:174,GSTATUS:175,IFORCE:228,PICLEAR:229,CICLEAR:230,AICLEAR:231,GFIFO_U:252,GFIFO_D:253,GFIFO_L:254,GFIFO_R:255},
b={ATIME:219,WTIME:246,PROX_PPULSE:135,GESTURE_PPULSE:137,POFFSET_UR:0,POFFSET_DL:0,CONFIG1:96,LDRIVE:0,PGAIN:2,AGAIN:1,PILT:0,PIHT:50,AILT:65535,AIHT:0,PERS:17,CONFIG2:1,CONFIG3:0,GPENTH:40,GEXTH:30,GCONF1:64,GGAIN:4,GLDRIVE:0,GWTIME:1,GOFFSET:0,GPULSE:201,GCONF3:0,GIEN:0};d.prototype.w=function(a,b){this.i2c.writeTo(this.addr,a,b)};d.prototype.r=function(a){this.i2c.writeTo(this.addr,a);return this.i2c.readFrom(this.addr,1)[0]};d.prototype.hasGesture=function(){return this.r(a.GSTATUS)&1};d.prototype.getGesture=
function(){if(this.hasGesture()&&this.r(a.ENABLE)&65){var e=this.r(a.GFLVL,e);if(0!==e)return this.i2c.writeTo(this.addr,a.GFIFO_U),e=this.i2c.readFrom(this.addr,4*e),this.decodeGesture(e)}};d.prototype.decodeGesture=function(a){for(var b=0,c=a.length-4;b<a.length&&!(10<a[b]&&10<a[b+1]&&10<a[b+2]&&10<a[b+3]);)b+=4;for(;0<=c&&!(10<a[c]&&10<a[c+1]&&10<a[c+2]&&10<a[c+3]);)c-=4;if(!(b>c)){var d=100*(a[c]-a[c+1])/(a[c]+a[c+1])-100*(a[b]-a[b+1])/(a[b]+a[b+1]);a=100*(a[c+2]-a[c+3])/(a[c+2]+a[c+3])-100*(a[b+
2]-a[b+3])/(a[b+2]+a[b+3]);return Math.abs(d)>Math.abs(a)?0<d?"up":"down":0<a?"left":"right"}};d.prototype.getProximity=function(){return this.r(a.PDATA)};d.prototype.getRGBA=function(){return{r:this.r(a.RDATAL)|this.r(a.RDATAH)<<8,g:this.r(a.GDATAL)|this.r(a.GDATAH)<<8,b:this.r(a.BDATAL)|this.r(a.BDATAH)<<8,a:this.r(a.CDATAL)|this.r(a.CDATAH)<<8}};exports.APDS9960=d;exports.connect=function(a){return new d(a)}