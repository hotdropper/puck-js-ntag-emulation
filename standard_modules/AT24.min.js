function e(a,b,c,d){this.i2c=a;this.i2ca=void 0===d?80:80|d&7;this.pgsz=b?b:0;this.cap=c<<7;this.ca=0}exports.connect=function(a,b,c,d){if(2048<c||!c||1024==c&&d&1||2048==c&&d&3)throw"i2ca invalid for that capacity";return new e(a,b,c,d)};e.prototype.a=function(a){return 2048<this.cap?E.toString([a>>8,a]):E.toString(a)};e.prototype.i=function(a){return this.i2ca|a>>(2048<this.cap?16:8)};e.prototype.read=function(a,b){void 0!==a&&this.i2c.writeTo(this.i(a),this.a(a));return this.i2c.readFrom(this.i(a),
b)};e.prototype.write=function(a,b){"string"!=typeof b&&(b=E.toString(b));for(var c=0;c<b.length;){var d=this.pgsz?this.pgsz-a%this.pgsz:b.length;this.i2c.writeTo(this.i(a),this.a(a)+b.substr(c,d));for(var e=getTime()+.012;getTime()<e&&this.pgsz;)"";c+=d;a+=d}return b.length}