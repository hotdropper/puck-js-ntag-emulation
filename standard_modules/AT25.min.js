function e(a,d,b,c){this.spi=a;this.cspin=c;this.pgsz=d;this.cap=b<<7;this.ca=0}exports.connect=function(a,d,b,c){if(4096<b||!b||d>b||!c)throw"Unsupported or invalid options";c.set();return new e(a,d,b,c)};e.prototype.read=function(a,d){void 0===a&&(a=this.ca);var b=new Uint8Array(d+(65536<this.cap?4:3)),c=0;b[c++]=3;65536<this.cap&&(b[c++]=a>>16);b[c++]=a>>8;b[c]=a;b=this.spi.send(b,this.cspin);this.ca=a+d;return new Uint8Array(b.buffer,65536<this.cap?4:3,d)};e.prototype.write=function(a,
d){var b=d.length;"string"!=typeof d&&(d=E.toString(d));for(var c=0;c<b;){this.spi.send(6,this.cspin);var e=this.pgsz?this.pgsz-a%this.pgsz:b,f=65536<this.cap?E.toString(2,a>>16,a>>8,a):E.toString(2,a>>8,a),f=f+d.substr(c,e);this.spi.send(f,this.cspin);for(f=getTime()+.012;getTime()<f&&this.pgsz;)"";c+=e;a+=e}return b}