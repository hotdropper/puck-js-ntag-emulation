function f(a,b,c){this.read=b;this.write=c;this.write(244,39);this.write(245,160);this.readCoefficients()}function d(a,b){var c=(a[b+1]<<8)+a[b];c&32768&&(c-=65536);return c}f.prototype.setPower=function(a){var b=this.read(244,1)[0];this.write(244,a?b|3:b&-4)};f.prototype.readCoefficients=function(){var a=new Uint8Array(32);a.set(this.read(136,24),0);a.set(this.read(161,1),24);a.set(this.read(225,7),25);this.dT=[,a[1]<<8|a[0],d(a,2),d(a,4)];this.dP=[,a[7]<<8|a[6],d(a,8),d(a,10),d(a,12),
d(a,14),d(a,16),d(a,18),d(a,20),d(a,22)]};f.prototype.readRawData=function(){var a=this.read(247,8);this.pres_raw=a[0]<<12|a[1]<<4|a[2]>>4;this.temp_raw=a[3]<<12|a[4]<<4|a[5]>>4;this.hum_raw=a[6]<<8|a[7]};f.prototype.calibration_T=function(a){var b=this.dT;var c=(a/16384-b[1]/1024)*b[2];a=(a/131072-b[1]/8192)*(a/131072-b[1]/8192)*b[3];this.t_fine=c+a;return(c+a)/5120*100};f.prototype.calibration_P=function(a){var b=this.dP;var c=this.t_fine/2-64E3;var e=c*c*b[6]/32768;e+=c*b[5]*2;e=e/4+65536*b[4];
c=(b[3]*c*c/524288+b[2]*c)/524288;c=(1+c/32768)*b[1];if(0===c)return 0;a=6250*(1048576-a-e/4096)/c;c=b[9]*a*a/2147483648;e=a*b[8]/32768;return a+=(c+e+b[7])/16};f.prototype.getData=function(){this.readRawData();return{temp:this.calibration_T(this.temp_raw)/100,pressure:this.calibration_P(this.pres_raw)/100}};exports.connect=function(a,b){return new f(b,function(b,e){a.writeTo(118,b);return a.readFrom(118,e)},function(b,e){a.writeTo(118,[b,e])})};exports.connectSPI=function(a,b,c){return new f(c,function(c,
d){return a.send([c|128,new Uint8Array(d)],b).slice(1)},function(c,d){a.write(c&127,d,b)})}