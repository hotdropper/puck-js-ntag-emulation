function c(b,a){a=null==a?{}:a;this.i2c=b;"number"===typeof a?this.addr=a:(this.addr=a.address||e.ADDRESS_DEFAULT,this.resetPin=a.resetPin||null);this.initialize()}var e={ADDRESS_DEFAULT:41};c.prototype.initialize=function(){this.linkLedsToSensors();this.multipleTouches(!0);this.i2c.writeTo(this.addr,[65,48])};c.prototype.reset=function(b){var a=this.resetPin,c=this;if(null==a)throw Error("CAP1188 reset called but no resetPin given");a.write(0);setTimeout(function(){a.write(1);setTimeout(function(){a.write(0);
setTimeout(function(){c.initialize();b&&b()},100)},100)},100)};c.prototype.multipleTouches=function(b){this.writeBit(42,7,b?0:1)};c.prototype.linkLedsToSensors=function(){for(var b=0;8>b;b++)this.linkLedToSensor(b,1)};c.prototype.linkLedToSensor=function(b,a){this.writeBit(114,b,a)};c.prototype.readTouches=function(){var b=[],a;this.i2c.writeTo(this.addr,3);(a=this.i2c.readFrom(this.addr,1)[0])&&this.writeBit(0,0,0);for(var c=0;8>c;c++)b[c]=this.getBit(a,c);return b};c.prototype.getBit=function(b,
a){return 1==(b>>a&1)};c.prototype.writeBit=function(b,a,c){this.i2c.writeTo(this.addr,b);var d=this.i2c.readFrom(this.addr,1)[0];this.i2c.writeTo(this.addr,[b,0!==c?d|1<<a:d&~(1<<a)])};c.prototype.writeBits=function(b,a,c){this.i2c.writeTo(this.addr,b);var d=this.i2c.readFrom(this.addr,1)[0];this.i2c.writeTo(this.addr,[b,d|c<<a])};exports.connect=function(b,a){return new c(b,a)}