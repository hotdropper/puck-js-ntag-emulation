function c(a){return(0|a[0])+2*(0|a[1])+4*(0|a[2])+8*(0|a[3])}function e(a){for(var c=0,b=0;b<a.length;b++)c^=a[b];return c}function f(a,d){if(e(a.substr(21,7))!=a[28])return d("Bad minutes");var b=c(a.substr(21,4))+10*c(a.substr(25,3));if(e(a.substr(29,6))!=a[35])return d("Bad hours");var g=c(a.substr(29,4))+10*c(a.substr(33,2));if(e(a.substr(36,22))!=a[58])return d("Bad date");var h=c(a.substr(36,4))+10*c(a.substr(40,2)),f=c(a.substr(45,4))+10*c(a.substr(49,1)),k=c(a.substr(50,4))+10*
c(a.substr(54,4));return d(null,new Date(2E3+k,f-1,h,g,b,0,0),{CEST:!!a[17],CET:!!a[18]})}exports.connect=function(a,c){var b={last:getTime(),bits:"",watchId:void 0};b.watchId=setWatch(function(a){var d=.15>a.time-a.lastTime?0:1;1.5<a.time-b.last&&(f(b.bits,c),b.bits="");b.last=a.time;b.bits+=d;59<b.bits.length&&(b.bits=b.bits.substr(-59))},a,{edge:"falling",repeat:!0,debounce:75});return b}