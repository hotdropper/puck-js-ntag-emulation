function f(a,b,c,e,d){this.ow=a;this.np=e;this.code=void 0===d?a.search()[0]:"string"==typeof d?d:a.search[d];this.pgsz=b;this.cap=c<<7}exports.connect=function(a,b,c,e,d){return new f(a,b,c,e,d)};f.prototype.s=function(a){this.ow.select(this.code);this.ow.write(a,4==a.length)};f.prototype.write=function(a,b){var c=a%this.pgsz;if(a+b.length>this.cap)throw"Write exceeds size";"object"==typeof b&&(b=E.toString(b));this.np&&c&&(b=this.read(a-c,c,1)+b,a-=c,c=0);for(var e=0;e<b.length;){var d=
b.length;d>this.pgsz-c&&(d=this.pgsz-c);this.s([15,a&255,a>>8]);this.ow.write(b.substr(e,d));this.s([170]);this.s(E.toUint8Array(85,this.ow.read(3)));for(var f=getTime()+.07;getTime()<f;)"";170==this.ow.read()&&(e+=d,a+=d,c=0)}return b.length};f.prototype.read=function(a,b){this.s([240,a&255,a>>8]);return this.ow.read(b)}