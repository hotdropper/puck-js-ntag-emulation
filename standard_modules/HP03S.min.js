exports.connect=function(b,c){return new f(b,c)};
function f(b,c){this.b=50;if(!b.i2c||!b.mclk||!b.xclr)throw Error("Missing i2c, mclk oder xclr configuration");this.i2c=b.i2c;this.xclr=b.xclr;analogWrite(b.mclk,.5,{freq:32768});digitalWrite(b.xclr,0);this.i2c.writeTo(80,16);var a=this.i2c.readFrom(80,18),d=a[0]<<8|a[1],e=a[2]<<8|a[3],g=a[4]<<8|a[5],k=a[6]<<8|a[7];this.a=a[8]<<8|a[9];var l=a[12]<<8|a[13];this.c=((a[10]<<8|a[11])/65536-1/(1<<a[17]))/10;var h=1<<14+a[16];this.f=a[14]/h;this.g=a[15]/h;this.h=25/131072*d;this.i=25/134217728*g;this.j=
-175/131072*g-25/32768*k+.78125;this.l=10*l-12.5*e-1.3671875*d;this.getPressure(function(){return c&&c()})}f.prototype.getPressure=function(b){var c=this;this.measure(240,function(a){c.measure(232,function(d){d-=c.a;var e=d-d*d*(0<d?c.f:c.g);d=a*(c.h+c.i*e)+e*c.j+c.l;e=25+c.c*e;b&&b(d,e)})})};
f.prototype.measure=function(b,c){var a=this;digitalWrite(this.xclr,1);this.i2c.writeTo(119,[255,b]);setTimeout(function(){a.i2c.writeTo(119,[253,239]);var b=a.i2c.readFrom(119,2);digitalWrite(a.xclr,0);c(b[0]<<8|b[1])},this.b)};
