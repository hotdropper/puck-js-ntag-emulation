var f=function(){function a(a){this.i2c=a;this.RH_12_BITS_TEMP_14_BITS=0;this.RH_8_BITS_TEMP_12_BITS=1;this.RH_10_BITS_TEMP_13_BITS=2;this.RH_11_BITS_TEMP_11_BITS=3;this.i2cAddress=64;this.measuringTimerId=null;this.softReset()}a.prototype.isMeasuring=function(){return!!this.measuringTimerId};a.prototype.readTemperature=function(){this.verifyNotMeasuring();this.writeCommand(a.CMD_TEMPERATURE_MEASUREMENT_HOLD_MASTER);return-46.85+175.72*this.readMeasuredData()/65536};a.prototype.getTemperature=
function(c){var b=this;this.verifyNotMeasuring();var d=a.mapResolution2TemperatureMeasurementTime[this.getResolution()];this.writeCommand(a.CMD_TEMPERATURE_MEASUREMENT_NO_HOLD_MASTER);this.measuringTimerId=setTimeout(function(){b.measuringTimerId=null;c(-46.85+175.72*b.readMeasuredData()/65536)},d)};a.prototype.readHumidity=function(){this.verifyNotMeasuring();this.writeCommand(a.CMD_HUMIDITY_MEASUREMENT_HOLD_MASTER);return-6+125*this.readMeasuredData()/65536};a.prototype.getHumidity=function(c){var b=
this;this.verifyNotMeasuring();var d=a.mapResolution2HumidityrMeasurementTime[this.getResolution()];this.writeCommand(a.CMD_HUMIDITY_MEASUREMENT_NO_HOLD_MASTER);this.measuringTimerId=setTimeout(function(){b.measuringTimerId=null;c(-6+125*b.readMeasuredData()/65536)},d)};a.prototype.getCompensatedHumidity=function(a,b){return a+-.15*(25-b)};a.prototype.getDewPoint=function(a,b){return 1/(1/(a+235.66)+(2-Math.log(b)/Math.LN10)/1762.39)-235.66};a.prototype.softReset=function(){this.verifyNotMeasuring();
this.writeCommand(a.CMD_SOFT_RESET)};a.prototype.getResolution=function(){this.verifyNotMeasuring();var a=this.readUserRegister()&129;return a&128?(a|2)&3:a&1};a.prototype.setResolution=function(c){this.verifyNotMeasuring();this.writeCommand(a.CMD_READ_USER_REGISTER);var b=this.read8(),b=b&-130;c&2&&(b|=128);this.i2c.writeTo(this.i2cAddress,[a.CMD_WRITE_USER_REGISTER,b|c&1])};a.prototype.isEndOfBattery=function(){this.verifyNotMeasuring();return!!(this.readUserRegister()&64)};a.prototype.isHeaterOn=
function(){this.verifyNotMeasuring();return!!(this.readUserRegister()&4)};a.prototype.setHeaterOn=function(c){this.verifyNotMeasuring();this.writeCommand(a.CMD_READ_USER_REGISTER);var b=this.read8();this.i2c.writeTo(this.i2cAddress,[a.CMD_WRITE_USER_REGISTER,c?b|4:b&-5])};a.prototype.getSerialNumber=function(){this.verifyNotMeasuring();this.i2c.writeTo(this.i2cAddress,[250,15]);var c=this.i2c.readFrom(this.i2cAddress,8);this.i2c.writeTo(this.i2cAddress,[252,201]);var b=this.i2c.readFrom(this.i2cAddress,
6);a.checkCrc(c[0],c[1]);a.checkCrc(c[2],c[3]);a.checkCrc(c[4],c[5]);a.checkCrc((b[0]<<8)+b[1],b[2]);if(72!==b[3]||84!==b[4]||0!==c[0]||50!==b[0])throw Error("Invalid Serial Number");return c[2]<<24|c[4]<<16|c[6]<<8|b[1]};a.prototype.writeCommand=function(a){this.i2c.writeTo(this.i2cAddress,a)};a.prototype.read8=function(){return this.i2c.readFrom(this.i2cAddress,1)[0]};a.prototype.readUserRegister=function(){this.writeCommand(a.CMD_READ_USER_REGISTER);return this.read8()};a.prototype.verifyNotMeasuring=
function(){if(this.measuringTimerId)throw Error("Sensor is measuring.");};a.prototype.readMeasuredData=function(){var c=this.i2c.readFrom(this.i2cAddress,3),b=c[0]<<8|c[1];a.checkCrc(b,c[2]);return b&65532};a.checkCrc=function(a,b){for(var d=a<<8|b,e=0;16>e;++e)d&8388608&&(d^=9994240),d<<=1;if(d)throw Error("CRC Error");};a.mapResolution2TemperatureMeasurementTime=[50,13,25,7];a.mapResolution2HumidityrMeasurementTime=[16,3,5,8];a.CMD_TEMPERATURE_MEASUREMENT_HOLD_MASTER=227;a.CMD_HUMIDITY_MEASUREMENT_HOLD_MASTER=
229;a.CMD_TEMPERATURE_MEASUREMENT_NO_HOLD_MASTER=243;a.CMD_HUMIDITY_MEASUREMENT_NO_HOLD_MASTER=245;a.CMD_WRITE_USER_REGISTER=230;a.CMD_READ_USER_REGISTER=231;a.CMD_SOFT_RESET=254;return a}();exports.connect=function(a){return new f(a)}