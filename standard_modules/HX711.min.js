function c(a){a=a||{};this.sck=a.sck;if(!this.sck)throw"Expecting sck";this.miso=a.miso;if(!this.miso)throw"Expecting miso";this.mode=a.mode||"A128";this.lsbGrams=a.lsbGrams||.00103123388;this.spi=new SPI;this.spi.setup({miso:this.miso,mosi:this.sck,baud:2E6});this.sck.write(0);this.zero=0}c.prototype.readRaw=function(){function a(a){return(a&128?8:0)|(a&32?4:0)|(a&8?2:0)|(a&2?1:0)}var b={A128:128,B32:160,A64:168}[this.mode];if(!b)throw"Invalid mode";b=this.spi.send([170,170,170,170,170,
170,b]);b=a(b[0])<<20|a(b[1])<<16|a(b[2])<<12|a(b[3])<<8|a(b[4])<<4|a(b[5]);b&8388608&&(b-=16777216);return b};c.prototype.tare=function(){this.zero=this.readRaw()};c.prototype.readGrams=function(){return(this.readRaw()-this.zero)*this.lsbGrams};c.prototype.isReady=function(){return!this.miso.read()};c.prototype.setStandby=function(a){this.sck.write(a)};exports.connect=function(a){return new c(a)}