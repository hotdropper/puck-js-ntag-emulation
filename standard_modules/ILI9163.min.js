function l(b,c,e,g,d){function a(a,f){c.reset();b.write(a,e);void 0!==f&&(c.set(),b.write(f,e))}g?digitalPulse(g,0,10):a(1);setTimeout(function(){a(17);setTimeout(function(){a(38,4);a(177,[14,16]);a(192,[8,0]);a(193,5);a(197,[56,64]);a(58,5);a(54,200);a(42,[0,0,0,128]);a(43,[0,0,0,128]);a(180,0);a(242,1);a(224,[63,34,32,48,41,12,78,183,60,25,34,30,2,1,0]);a(225,[0,27,31,15,22,19,49,132,67,6,29,33,61,62,63]);a(41);a(44);d&&d()},20)},100)}exports.connect=function(b,c,e,g,d){var a=Graphics.createCallback(128,
128,16,{setPixel:function(a,f,h){e.reset();b.write(42,c);b.write(0,a,0,a+1);b.write(43,c);b.write(0,f,0,f+1);b.write(44,c);b.write(h>>8,h);e.set()},fillRect:function(a,f,h,g,d){e.reset();b.write(42,c);b.write(0,a,0,h);b.write(43,c);b.write(0,f,0,g);b.write(44,c);b.write({data:String.fromCharCode(d>>8,d),count:(h-a+1)*(g-f+1)});e.set()}});l(b,c,e,g,d);return a};exports.connectPaletted=function(b,c,e,g,d,a){var k;k=16<b.length?8:4<b.length?4:2<b.length?2:1;var f=Graphics.createArrayBuffer(128,128,k,
{msb:!0});f.flip=function(){g.reset();c.write(42,e);c.write(0,0,0,128);c.write(43,e);c.write(0,0,0,128);c.write(44,e);for(var a=new Uint16Array(2048),d=0;128>d;d+=16)E.mapInPlace(new Uint8Array(f.buffer,128*d*k/8,a.length),a,b,k),c.write(a.buffer);g.set()};l(c,e,g,d,a);return f}