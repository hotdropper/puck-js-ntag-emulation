function d(a){this.i2c=a;this.G_Z=this.G_Y=this.G_X=this.XL_Z=this.XL_Y=this.XL_X=0;this.options={}}var c={I2C_ADDRESS:107,I2C_ADDRESS1:106,FUNC_CFG_ACCESS:1,SENSOR_SYNC_TIME_FRAME:4,SENSOR_SYNC_RES_RATIO:5,FIFO_CTRL:[6,7,8,9,10],DRDY_PULSE_CFG_G:11,INT1_CTRL:13,INT2_CTRL:14,WHO_AM_I:15,CTRL:[16,17,18,19,20,21,22,23,24,25],MASTER_CONFIG:26,WAKE_UP_SRC:27,TAP_SRC:28,D6D_SRC:29,STATUS_REG:30,OUT_TEMP:[32,33],OUT_G:[34,35,36,37,38,39],OUT_XL:[40,41,42,43,44,45],SENSORHUB:[46,47,48,49,50,
51,52,53,54,55,56,57]};exports.connect=function(a){return new d(a)};d.prototype.SetReg=function(a,b){print("REG: "+a.toString(16)+", CFG: "+b.toString(16));this.w(a,b)};d.prototype.GetReg=function(a){return this.r(a)};d.prototype.SetThreshold=function(a){this.w(c.INT_THS[0],a&255);this.w(c.INT_THS[1],a>>8)&127};d.prototype.enable=function(a){this.options=a||{};a=16;this.options.mode&&("middle"==this.options.mode&&(a=32),"fast"==this.options.mode&&(a=48));this.options.sensor?("both"==this.options.mode&&
(this.w(c.CTRL[0],a),this.w(c.CTRL[1],a)),"gyro"==this.options.mode&&(this.w(c.CTRL[0],0),this.w(c.CTRL[1],a)),"acc"==this.options.mode&&(this.w(c.CTRL[0],a),this.w(c.CTRL[1],0))):(this.w(c.CTRL[0],a),this.w(c.CTRL[1],a));this.options.interrupt?this.w(c.INT1_CTRL,3):this.w(c.INT1_CTRL,0)};d.prototype.GetID=function(){return this.r(c.WHO_AM_I)};d.prototype.GetTemperature=function(){return this.r2(c.TEMP_OUT[0])};d.prototype.logReg=function(){var a=console.log;a("Status Register: "+this.r(c.STATUS_REG).toString(16));
for(var b=1;127>b;b++)2===b&&(b=4),12===b&&(b=13),31===b&&(b=32),a("Reg "+b.toString(16)+": "+this.r(b).toString(16))};d.prototype.r=function(a){this.i2c.writeTo({address:c.I2C_ADDRESS,stop:!1},a);return this.i2c.readFrom(c.I2C_ADDRESS,1)[0]};d.prototype.r2=function(a){this.i2c.writeTo({address:c.I2C_ADDRESS,stop:!1},a);a=this.i2c.readFrom(c.I2C_ADDRESS,2);return a[0]+256*a[1]};d.prototype.updateXL=function(){this.i2c.writeTo({address:c.I2C_ADDRESS,stop:!1},c.OUT_XL[0]);var a=this.i2c.readFrom(c.I2C_ADDRESS,
6),b=new Int16Array(3);b[0]=a[0]+256*a[1];b[1]=a[2]+256*a[3];b[2]=a[4]+256*a[5];this.XL_X=b[0]/16384;this.XL_Y=b[1]/16384;this.XL_Z=b[2]/16384};d.prototype.updateG=function(){this.i2c.writeTo({address:c.I2C_ADDRESS,stop:!1},c.OUT_G[0]);for(var a=this.i2c.readFrom(c.I2C_ADDRESS,6),b=new Int16Array(6),d=0;3>d;d++)b[d]=a[2*d]+256*a[2*d+1];this.G_X=(a[0]+256*a[1])/1142;this.G_Y=(a[2]+256*a[3])/1142;this.G_Z=(a[4]+256*a[5])/1142};d.prototype.update=function(){this.i2c.writeTo({address:c.I2C_ADDRESS,stop:!1},
c.OUT_G[0]);for(var a=this.i2c.readFrom(c.I2C_ADDRESS,12),b=new Int16Array(6),d=0;6>d;d++)b[d]=a[2*d]+256*a[2*d+1];this.XL_X=b[3]/16784;this.XL_Y=b[4]/16784;this.XL_Z=b[5]/16784;this.G_X=b[0]/1142;this.G_Y=b[1]/1142;this.G_Z=b[2]/1142};d.prototype.w=function(a,b){this.i2c.writeTo(c.I2C_ADDRESS,a,b)}