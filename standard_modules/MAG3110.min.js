function a(b,c){this.i2c=b;this.address=c&&c.address||14;if(196!=this.read8(a.WHO_AM_I))throw Error("invalid device id");}a.prototype.getMode=function(){return this.read8(a.SYSMOD)};a.prototype.setMode=function(b){var c=this.read8(a.CTRL_REG1);0===b?this.write8(a.CTRL_REG1,c&254):(this.write8(a.CTRL_REG1,c|1),this.write8(a.CTRL_REG2,1===b?32:0))};a.prototype.read=function(){this.i2c.writeTo(this.address,a.OUT_X_MSB);var b=this.i2c.readFrom(this.address,6);return{x:a.fromTwoComplement(b[0],
b[1]),y:a.fromTwoComplement(b[2],b[3]),z:a.fromTwoComplement(b[4],b[5])}};a.prototype.getOffset=function(){this.i2c.writeTo(this.address,a.OFF_X_MSB);var b=this.i2c.readFrom(this.address,6),c=b[0]<<7|b[1]>>1,d=b[2]<<7|b[3]>>1,b=b[4]<<7|b[5]>>1;return{x:c&16384?c-32768:c,y:d&16384?d-32768:d,z:b&16384?b-32768:b}};a.prototype.setOffset=function(b){var c=b.x<<1,d=b.y<<1;b=b.z<<1;this.i2c.writeTo(this.address,[a.OFF_X_MSB,(c&65280)>>8,c&255,(d&65280)>>8,d&255,(b&65280)>>8,b&255])};a.prototype.triggerMeasurement=
function(){if(0!=this.getMode())throw Error("The device must be in STANDBY mode to trigger an immediate measurement.");var b=this.read8(a.CTRL_REG1);this.write8(a.CTRL_REG1,b|2)};a.prototype.isNewDataAvailable=function(){return!!(this.read8(a.DR_STATUS)&8)};a.prototype.setSamplingParams=function(b){if(0!=this.getMode())throw Error("Sample params can only be changed in STANDBY mode.");var c=this.read8(a.CTRL_REG1);this.write8(a.CTRL_REG1,c&7|b<<3)};a.prototype.getSamplingParams=function(){return this.read8(a.CTRL_REG1)>>
3};a.prototype.readTemperature=function(){var b=this.read8(a.DIE_TEMP);return b&128?b-256:b};a.prototype.magneticReset=function(){var b=this.read8(a.CTRL_REG2);this.write8(a.CTRL_REG2,b|16)};a.prototype.setAutomaticMagneticReset=function(b){var c=this.read8(a.CTRL_REG2);this.write8(a.CTRL_REG2,b?c|128:c&127)};a.prototype.read8=function(b){this.i2c.writeTo(this.address,b);return this.i2c.readFrom(this.address,1)[0]};a.prototype.write8=function(b,a){this.i2c.writeTo(this.address,[b,a])};a.fromTwoComplement=
function(a,c){var d=a<<8|c;return d&32768?d-65536:d};a.DR_STATUS=0;a.OUT_X_MSB=1;a.WHO_AM_I=7;a.SYSMOD=8;a.OFF_X_MSB=9;a.DIE_TEMP=15;a.CTRL_REG1=16;a.CTRL_REG2=17;exports.connect=function(b,c){return new a(b,c)}