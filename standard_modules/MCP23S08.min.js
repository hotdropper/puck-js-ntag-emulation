function d(a,c,e,d){e&&e.write(0);this.spi=a;this.ad=d?(d<<1)+64:64;this.cs=c;this.n=255;this.olat=this.pu=0;this.A0=new b(1,this);this.A1=new b(2,this);this.A2=new b(4,this);this.A3=new b(8,this);this.A4=new b(16,this);this.A5=new b(32,this);this.A6=new b(64,this);this.A7=new b(128,this);e&&(this.rst=e,this.rst.write(1))}function b(a,c){this.b=a;this.p=c}exports.connect=function(a,c,b,f){return new d(a,c,b,f)};d.prototype.s=function(a,c){this.spi.write([this.ad,a,c],this.cs)};d.prototype.r=
function(a){return this.spi.send([this.ad+1,a,0])&255};d.prototype.mode=function(a,c){this.m(1<<a,c)};d.prototype.m=function(a,c){if(0>["input","output","input_pullup"].indexOf(c))throw"Pin mode "+c+" not available";this.s(0,"output"==c?this.n&=~a:this.n|=a);this.s(6,"input_pullup"==c?this.pu|=a:this.pu&=~a)};d.prototype.write=function(a,c){var b=1<<a;this.olat&=~b;this.s(9,this.olat|=b*c)};d.prototype.read=function(a){var b=1<<a;return(this.r(9)[0]&b)>>a};b.prototype.set=function(){this.p.s(9,this.p.olat|=
this.b)};b.prototype.reset=function(){this.p.s(9,this.p.olat&=~this.b)};b.prototype.write=function(a){this.p.s(9,a?this.p.olat|=this.b:this.p.olat&=~this.b)};b.prototype.read=function(){return this.p.r(9)[0]&this.b?1:0};b.prototype.mode=function(a){this.p.m(this.b,a)}