function e(d){this.i2c=d;if(196!=this.r(c.WHOAMI,1)[0])throw Error("MPL3115A2 'WHOAMI' request failed");this.w(c.CTRL_REG1,b.CTRL_REG1_SBYB|b.CTRL_REG1_OS128|b.CTRL_REG1_ALT);this.w(c.PT_DATA_CFG,b.PT_DATA_CFG_TDEFE|b.PT_DATA_CFG_PDEFE|b.PT_DATA_CFG_DREM);this.busy=0}var c={STATUS:0,PRESSURE_MSB:1,PRESSURE_CSB:2,PRESSURE_LSB:3,TEMP_MSB:4,TEMP_LSB:5,DR_STATUS:6,P_DELTA_MSB:7,P_DELTA_CSB:8,P_DELTA_LSB:9,T_DELTA_MSB:10,T_DELTA_LSB:11,WHOAMI:12,PT_DATA_CFG:19,CTRL_REG1:38,CTRL_REG2:39,CTRL_REG3:40,
CTRL_REG4:41,CTRL_REG5:42},b={STATUS_TDR:2,STATUS_PDR:4,STATUS_PTDR:8,PT_DATA_CFG_TDEFE:1,PT_DATA_CFG_PDEFE:2,PT_DATA_CFG_DREM:4,CTRL_REG1_SBYB:1,CTRL_REG1_OST:2,CTRL_REG1_RST:4,CTRL_REG1_OS1:0,CTRL_REG1_OS2:8,CTRL_REG1_OS4:16,CTRL_REG1_OS8:24,CTRL_REG1_OS16:32,CTRL_REG1_OS32:40,CTRL_REG1_OS64:48,CTRL_REG1_OS128:56,CTRL_REG1_RAW:64,CTRL_REG1_ALT:128,CTRL_REG1_BAR:0};e.prototype.r=function(b,a){this.i2c.writeTo({address:96,stop:!1},b);return this.i2c.readFrom(96,a)};e.prototype.w=function(b,a){this.i2c.writeTo(96,
b,a)};e.prototype.getPressure=function(d){if(this.busy)throw new "MPL3115A2 is busy";this.w(c.CTRL_REG1,b.CTRL_REG1_SBYB|b.CTRL_REG1_OS128|b.CTRL_REG1_BAR);this.busy=setInterval(function(){if(this.r(c.STATUS,1)[0]&b.STATUS_PDR){var a=this.r(c.PRESSURE_MSB,3),a=a[0]<<12|a[1]<<4|a[2]>>4;clearInterval(this.busy);this.busy=0;d(a/4)}}.bind(this),10)};e.prototype.getAltitude=function(d){if(this.busy)throw new "MPL3115A2 is busy";this.w(c.CTRL_REG1,b.CTRL_REG1_SBYB|b.CTRL_REG1_OS128|b.CTRL_REG1_ALT);this.busy=
setInterval(function(){if(this.r(c.STATUS,1)[0]&b.STATUS_PDR){var a=this.r(c.PRESSURE_MSB,3),a=a[0]<<12|a[1]<<4|a[2]>>4;a&8388608&&(a-=16777216);clearInterval(this.busy);this.busy=0;d(a/16)}}.bind(this),10)};e.prototype.getTemperature=function(d){if(this.busy)throw new "MPL3115A2 is busy";this.busy=setInterval(function(){if(this.r(c.STATUS,1)[0]&b.STATUS_TDR){var a=this.r(c.TEMP_MSB,2),a=a[0]<<4|a[1]>>4;clearInterval(this.busy);this.busy=0;d(a/16)}}.bind(this),10)};exports.connect=function(b){return new e(b)}