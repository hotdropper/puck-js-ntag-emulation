function c(a,b){this.mpu=a;this.fifoRate=b;this.initialize()}exports.create=function(a,b){return new c(a,b)};c.prototype.getData=function(){var a=this.getIntStatus(),b=this.getFIFOCount();if(a&16||1024==b)this.resetFIFO(),console.log("FIFO overflow!");else{if(a&2){for(;42>b;)b=c.getFIFOCount();a=this.getFIFOBytes(42);return{qw:e(a[0],a[1])/16384,qx:e(a[4],a[5])/16384,qy:e(a[8],a[9])/16384,qz:e(a[12],a[13])/16384,gyrox:e(a[16],a[17]),gyroy:e(a[20],a[21]),gyroz:e(a[24],a[25]),accelx:e(a[28],
a[29]),accely:e(a[32],a[33]),accelz:e(a[36],a[37])}}console.log("DMP Data NOT ready")}};var e=function(a,b){var d=a<<8|b;32768<d&&(d-=65536);return d};c.prototype.getGravity=function(a){return{x:2*(a.qx*a.qz-a.qw*a.qy),y:2*(a.qw*a.qx+a.qy*a.qz),z:a.qw*a.qw-a.qx*a.qx-a.qy*a.qy+a.qz*a.qz}};c.prototype.getYawPitchRoll=function(a){var b=this.getGravity(a);return{yaw:Math.atan2(2*a.qx*a.qy-2*a.qw*a.qz,2*a.qw*a.qw+2*a.qx*a.qx-1),pitch:Math.atan(b.x/Math.sqrt(b.y*b.y+b.z*b.z)),roll:Math.atan(b.y/Math.sqrt(b.x*
b.x+b.z*b.z))}};c.prototype.getEuler=function(a){return{psi:Math.atan2(2*a.qx*a.qy-2*a.qw*a.qz,2*a.qw*a.qw+2*a.qx*a.qx-1),theta:-Math.asin(2*a.qx*a.qz+2*a.qw*a.qy),phi:Math.atan2(2*a.qy*a.qz-2*a.qw*a.qx,2*a.qw*a.qw+2*a.qz*a.qz-1)}};c.prototype.writeDMPConfigurationSet=function(a){var b=a.length;a[b-1]=this.fifoRate;for(var d,g,h,f=0;f<b;)if(d=a[f++],g=a[f++],h=a[f++],0<h){if(!this.mpu.writeMemoryBlock(a.slice(f,f+h),d,g))return console.log("Can't write to MSP6050 memory block"),!1;f+=h}else if(d=
a[f++],1==d)this.mpu.writeBytes(56,50);else return console.log("Unknowns special command: "+d),!1;return!0};c.prototype.setIntEnabled=function(a){this.mpu.writeBytes(56,a)};c.prototype.setSampleRate=function(a){this.mpu.writeBytes(25,a)};c.prototype.setExternalFrameSync=function(a){this.mpu.writeBits(26,5,3,a)};c.prototype.setDLPFMode=function(a){this.mpu.writeBits(26,2,3,a)};c.prototype.setDMPConfig1=function(a){this.mpu.writeBytes(112,a)};c.prototype.setDMPConfig2=function(a){this.mpu.writeBytes(113,
a)};c.prototype.setFIFOEnabled=function(a){this.mpu.writeBit(106,6,a)};c.prototype.resetFIFO=function(){this.mpu.writeBit(106,2,!0)};c.prototype.getFIFOCount=function(){var a=this.mpu.readBytes(114,2);return a[0]<<8|a[1]};c.prototype.getFIFOBytes=function(a){return 1>a?new Uint8Array([]):this.mpu.readBytes(116,a)};c.prototype.setMotionDetectionThreshold=function(a){this.mpu.writeBytes(31,a)};c.prototype.setZeroMotionDetectionThreshold=function(a){this.mpu.writeBytes(33,a)};c.prototype.setMotionDetectionDuration=
function(a){this.mpu.writeBytes(32,a)};c.prototype.setZeroMotionDetectionDuration=function(a){this.mpu.writeBytes(34,a)};c.prototype.setDMPEnabled=function(a){this.mpu.writeBit(106,7,a)};c.prototype.resetDMP=function(){this.mpu.writeBit(106,3,!0)};c.prototype.getIntStatus=function(){return this.mpu.readBytes(58,1)[0]};c.prototype.initialize=function(){console.log("Resetting MPU6050...");this.mpu.reset();setTimeout(k,30,this)};var k=function(a){a.mpu.setSleepEnabled(!1);a.mpu.setMemoryBank(0,!1,!1);
console.log("OTP bank is "+(a.mpu.getOTPBankValid()?"valid!":"INvalid!"));var b=a.mpu.getXGyroOffsetTC(),d=a.mpu.getYGyroOffsetTC(),g=a.mpu.getZGyroOffsetTC();a.mpu.setSlaveAddress(0,127);a.mpu.setI2CMasterModeEnabled(!1);a.mpu.setSlaveAddress(0,104);a.mpu.resetI2CMaster();setTimeout(l,20,a,b,d,g)},l=function(a,b,d,g){if(a.mpu.writeMemoryBlock(new Uint8Array(require("heatshrink").decompress(atob("/YCBn0AhcAm0AgMAgUAgYQCssAqn/94GB/WACoMSwQVEABsoAQP//9FwIDB/VyCAsD9AECE4MBv4SB/2AA4MbF50+gcwoAGCgXK8cJnxTBgEgCwwTDsADCoP/BocLlQDBi1VAYMhwX9w8mqH9E4UAj4DCgoIDLohACNQY3FAAMEt4PBssyA4Ne4APFZ5WMt9d/tdhHZgF8uc7gFsiXMEgMTzoDB6HWAYMIHYUB+n/82AvLSFCYIDBk8Qf4RTGABBtDaQoHE/U2/+8mGORYP7+H/7Nb5H/6Ga3wTBiGp//0j2ygHO3f3F40ET4UCK4UM//CWYUBAYXPAYJXGJ40GAgcUVxwAkgc/tG2vM1lG841+6NsLIRXG2VqEps/+AECmBNhktNgEvuFtA4MF1ytBgXQCQllgFU//vfxVEA4cMXRIfBAANUAQIjJABLjGB7BEGgTsojYpoNYovqACfY7m60Xx72y3G01GByP3pWQv+RtXz/Pb1H52G60GA+XOwPz4Xx4Py4fz5mi2WA+PG7GA3Wn74AB+Wn4fL4u2+GH0WUklIuE8ytAtE0rGbvBDBweSltVvvY2O03Gh6GRHQNw+dw+V8wGo+MB2GYw/ZofYw3JxG60Pyh24y5GB1JCC1RGD1XF5vH1MM5Msy4ACCoOJk1Gs2w2m6wGs73y5Xx2WMgWp22YgGJh0Wj241O0zMsql82GK1GWm1Wu3x3Ov2mwwfA3Goy8R2OPzAMB+EkhFEiFkjHx0cpPYOvwe1yYQBgEoqANBw2fsOm7Xe7/Z/QJBy3bmOm7P47+602P4XF45XB4O40R7C0YDC7HY+JGB2WG2mYhs1ru41WY2GHls1nuy2261+My0Zx+f055C2maCwOHPQW50ZJBGIOxaYPE5vJGQKOCwYxCxIVBdwRwB0YoC1IkC3CWB+OXweoiOE0sJzGjwfw7SXFMQOlTAWlwuVgUal06q1aoFI/Pz0aMB+GYwYeFy+C1HxiINB0QNF7Xz73YwelykB7OjgXx0XDVgI8BwmS0VN7Uq7FItPZAgNoqvamXYqFx7IEBuFd7U67FYvPZAgN4PwIfd1GKzXwlFQvGe+eIjHxz8dzGo7MI7HIz8SBwMV1HaiUQL4Ov5GXw802u5ymkkPz7Mi7HyloFBI4PymoFBIYOB0lgsFh7Nh7FstBbBtPYulwK4Nx7Gx0eEjM9rrcBjU+r2TiEwwMQiO42Gvx+U+Xan3Y2ma1GHlPa/HYw+amoFEnoFC2O50mYwsCl1W0uBgEMimjy+wxXxlvZlHYpvZpHYtvZtAdBwkN7UO7GjlOD7UsAwWEpIHCpgIBKAKwC+sg1Xa7/Y1FA1XQ7XeAwNgBgPQBoPxy+G1ExzcGzMH1eXlGIzfwhkgilAFYO01GMznwgkoqN5jswik42WC1fQzEsqDrBvGb+Ma2HwxWc1EpDAOLAYWKklwrOLkFYuOKolpnGLnNAtGKslImOLmFJsGlxEghNxrFEtERnNkpMwjPx1kAllUvnwxmoJ4JCB+OIy8m1FZzGsxkCk1Gs3wxJKEIoRACHYWpxEJkFZuGriM4oFp1EZmNIsAyBnlBrkgvkA+OHzEZUgNuu1+1OZxEtqt9z250eKkWKt2Kq2Kr2f2ODgxICh0up1uzu41pnD+Wxxm0zIgBEwWByOsnGtnW1wYGBlvZlHYpvZpHYtvZtHYxmd10p7ME13YqIEDvIEB7GB+edHAON10ZwOt7MB7Hy13ak3Yx2RlOD0/Z1oAC+cq7HY+Ow1mJyM+r12+esl0u+JcBrWc1kslAABAoMwjGozGBlE0nmXkmnAoWckny2GJ1mRllMtmKzZuBGoJeBAYJdBHoWexGjmPaA4ORQZa0Byc1nuAkoWCwtpAgW0yeB0ZCC+erxf40eR20J2nZ1fe/Www+cYgPd+OjAAWVAoedBQny0e0yGAAgIAI2QGFFgO1zIfDzAkEy4ED+ebAYPc3On+MmAAJgB/4"))),
0,0)){console.log("Success! DMP code written and verified.");if(a.writeDMPConfigurationSet(new Uint8Array(require("heatshrink").decompress(atob("gd7gdM5tsgergc2q12gFogkC5dH0UCjEEgEFxfBgMMAwIgDv8GhnJlmXAAMDxMDk1Gs0AtkCkEAgVADQkCogGFpAGFpgGFqAGFqgGFrAGFrgGF3gGEgPsAwVALJJ1BgcNmtdgkJgmHls1nsA0cBEYkHw0B/0HoMF+MglEwnEHv0BmEHo0BzUHo8E+IODtgGEgUWgQnBA"))))){console.log("Success! DMP configuration written and verified.");a.mpu.setClockSource(3);a.setIntEnabled(18);a.setSampleRate(4);a.setExternalFrameSync(1);
a.setDLPFMode(3);a.mpu.setFullScaleGyroRange(3);a.setDMPConfig1(3);a.setDMPConfig2(0);a.mpu.setOTPBankValid(!1);a.mpu.setXGyroOffsetTC(b);a.mpu.setYGyroOffsetTC(d);a.mpu.setZGyroOffsetTC(g);b=[[1,178,[255,255]],[1,144,[9,35,161,53]],[1,106,[6,0]],[1,96,[0,0,0,0,0,0,0,0]],[0,96,[64,0,0,0]],[1,98,[0,0]],[0,96,[0,64,0,0]]];a.mpu.writeMemoryBlock(b[0][2],b[0][0],b[0][1]);a.mpu.writeMemoryBlock(b[1][2],b[1][0],b[1][1]);a.resetFIFO();a.getFIFOBytes(a.getFIFOCount());a.setMotionDetectionThreshold(2);a.setZeroMotionDetectionThreshold(156);
a.setMotionDetectionDuration(80);a.setZeroMotionDetectionDuration(0);a.resetFIFO();a.setFIFOEnabled(!0);a.setDMPEnabled(!0);a.resetDMP();a.mpu.writeMemoryBlock(b[2][2],b[2][0],b[2][1]);a.mpu.writeMemoryBlock(b[3][2],b[3][0],b[3][1]);for(a.mpu.writeMemoryBlock(b[4][2],b[4][0],b[4][1]);3>(d=a.getFIFOCount()););console.log("FIFO count: "+d+" Data: "+a.getFIFOBytes(d));console.log("IntStatus: "+a.getIntStatus());for(a.mpu.readMemoryBlock(2,b[5][0],b[5][1]);3>(d=a.getFIFOCount()););console.log("FIFO count: "+
d+" Data: "+a.getFIFOBytes(d));console.log("IntStatus: "+a.getIntStatus());a.mpu.writeMemoryBlock(b[6][2],b[6][0],b[6][1]);a.resetFIFO();console.log("DMP is good to go! IntStatus: "+a.getIntStatus())}else return 2;return 0}return 1}