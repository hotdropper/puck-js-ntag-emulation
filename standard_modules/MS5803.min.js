function f(b,d){this._i2c=b;this._address=d||a.ADDRESS_HIGH}function h(b){return new Promise(function(d){return setTimeout(d,b)})}var a={PRESSURE:0,TEMPERATURE:16,ADDRESS_HIGH:118,ADDRESS_LOW:119,CMD_RESET:30,CMD_ADC_READ:0,CMD_ADC_CONV:64,CMD_PROM:160};f.prototype.PRECISION={ADC_256:0,ADC_512:2,ADC_1024:4,ADC_2048:6,ADC_4096:8};f.prototype.reset=function(){this._i2c.writeTo(this._address,a.CMD_RESET);return h(3)};f.prototype.begin=function(){this.coefficients=[];for(var b=1;6>=b;b++){this._i2c.writeTo(this._address,
a.CMD_PROM+2*b);var d=this._i2c.readFrom(this._address,2);this.coefficients[b]=d[0]<<8|d[1]}};f.prototype.getADCconversion=function(b,d){var e=this;this._i2c.writeTo(this._address,a.CMD_ADC_CONV+b+d);var g=11;switch(d){case a.ADC_256:g=2;break;case a.ADC_512:g=4;break;case a.ADC_1024:g=5;break;case a.ADC_2048:g=7;break;case a.ADC_4096:g=11}return h(g).then(function(){e._i2c.writeTo(e._address,a.CMD_ADC_READ);var b=e._i2c.readFrom(e._address,3);return b[0]<<16|b[1]<<8|b[2]})};f.prototype.read=function(b,
d){var e=this;b=b||this.PRECISION.ADC_256;return this.getADCconversion(a.TEMPERATURE,b).then(function(g){return e.getADCconversion(a.PRESSURE,b).then(function(b){var a=g-(e.coefficients[5]<<8),c=a*e.coefficients[6]/8388608+2E3,f=65536*e.coefficients[2]+e.coefficients[4]*a/128,h=32768*e.coefficients[1]+e.coefficients[3]*a/256;if(2E3>c){a=a*a/8589934592*3;var k=3*(c-2E3)*(c-2E3)/2;var l=5*(c-2E3)*(c-2E3)/8;-1500>c&&(k+=7*(c+1500)*(c+1500),l+=4*(c+1500)*(c+1500))}else a=7*a*a/137438953472,k=(c-2E3)*
(c-2E3)/16,l=0;c=(c-a)/100;return{temperature:d?9*c/5+32:c,pressure:((h-l)*b/2097152-(f-k))/32768/10}})})};exports.connectI2C=function(a,d){return new f(a,d)}