function l(b,h){this.uart=b;b.setup(h,{parity:"none",bytesize:8,stopbits:1});var f="W",a="",g=0,c=0,d=0,e=this;b.on("data",function(b){for(var h in b){var k=b.charCodeAt(h);"W"===f?128>k?print("Out of order or non-command, discarding"):(d=k&15,a=k&240,f=192==a||208==a?"2":"1"):"1"==f?(g=k,f="2"):"2"==f&&(c=k,144===a?e.emit("noteOn",{chan:d,note:g,velocity:c}):128===a?e.emit("noteOff",{chan:d,note:g,velocity:c}):176===a?e.emit("ctrlChange",{chan:d,ctrl:g,value:c}):224===a?e.emit("pitchBend",
{chan:d,value:g|c<<7}):"0xa0"===a?e.emit("afterTouch",{chan:d,note:g,value:c}):192===a?e.emit("patchChange",{chan:d,patch:c}):208===a&&e.emit("channelPress",{chan:d,press:c}),f="W")}})}exports.setup=function(b,h){return new l(b,h)}