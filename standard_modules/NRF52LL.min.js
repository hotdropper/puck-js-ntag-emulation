exports.gpiote=function(c,a){var b=1073766400+4*c;b={config:b+1296,tOut:b,tSet:b+48,tClr:b+96,eIn:b+256};var e=0|{task:3,event:1,disabled:0}[a.type]|(new Pin(a.pin)).getInfo().num<<8|(a.lo2hi?1:0)<<16|(a.hi2lo?1:0)<<17|(a.initialState?1:0)<<20;poke32(b.config,e);return b};exports.timer=function(c,a){var b=1073741824+4096*[8,9,10,26,27][c];b={shorts:b+512,mode:b+1284,bitmode:b+1288,prescaler:b+1296,cc:[b+1344,b+1348,b+1352,b+1356,b+1360,b+1364],tStart:b,tStop:b+4,tCount:b+8,tClear:b+12,
tShutdown:b+16,tCapture:[b+64,b+68,b+72,b+76,b+80,b+84],eCompare:[b+320,b+324,b+328,b+332,b+336,b+340]};poke32(b.mode,"counter"==a.type?2:0);poke32(b.bitmode,[16,8,24,32].indexOf(a.bits)&3);poke32(b.prescaler,a.prescaler);for(var e=0,f=0;6>f;f++)a.cc&&poke32(b.cc[f],a.cc[f]),a["cc"+f+"clear"]&&(e|=1<<f),a["cc"+f+"stop"]&&(e|=256<<f);poke32(b.shorts,e);return b};exports.lpcomp=function(c){var a={result:1073820672,enable:1073820928,psel:1073820932,refsel:1073820936,extrefsel:1073820940,hyst:1073820984,
tStart:1073819648,tStop:1073819652,tSample:1073819656,eReady:1073819904,eDown:1073819908,eUp:1073819912,eCross:1073819916,shorts:1073820160,sample:function(){poke32(a.tSample,1);return peek32(a.result)},cross:function(){var e={up:peek32(a.eUp),down:peek32(a.eDown),cross:peek32(a.eCross)};poke32(a.eDown,0);poke32(a.eUp,0);poke32(a.eCross,0);return e}};poke32(a.tStop,1);poke32(a.enable,0);if(c.vref instanceof Pin){poke32(a.refsel,7);var b=c.vref.getInfo().channel;if(0!==b&&1!==b)throw Error("Invalid vref pin (must be analog0 or 1)");
poke32(a.extrefsel,b)}else{b=parseInt(c.vref);if(1>b||15<b)throw Error("Invalid vref (1..15)");poke32(a.refsel,(b-1>>1)+8*(b&1))}b=(new Pin(c.pin)).getInfo().channel;if(void 0===b)throw Error("Invalid pin (must be capable of analog)");poke32(a.psel,b);poke32(a.hyst,c.hyst?1:0);poke32(a.shorts,1);poke32(a.enable,1);poke32(a.eReady,0);poke32(a.eDown,0);poke32(a.eUp,0);poke32(a.eCross,0);poke32(a.tStart,1);return a};exports.saadc=function(c){var a={status:1073771520,enable:1073771776,amount:1073772084,
tStart:1073770496,tSample:1073770500,tStop:1073770504,tCalib:1073770508,eResultDone:1073770764,eEnd:1073770756,setDMA:function(d){d=d||{};poke32(1073772076,0|d.ptr);poke32(1073772080,0|d.cnt)},sample:function(d){d=d||1;if(1<d&&!c.samplerate)throw"Can't do >1 sample with no samplerate specified";if(1<d&&1<c.channels.length)throw"Can't do >1 channel with a samplerate specified";var h=new Uint16Array(Math.max(d*c.channels.length,32)),g=E.getAddressOf(h,!0);a.setDMA({ptr:g,cnt:d*c.channels.length});poke32(a.eEnd,
0);poke32(a.tStart,1);for(poke32(a.tSample,1);!peek32(a.eEnd););poke32(a.tStop,1);a.setDMA();return h.slice(0,d*c.channels.length)}},b=[void 0,"down","up","vcc/2"],e=[1/6,.2,.25,1/3,.5,1,2,4],f=[3,5,10,15,20,40];c.resolution||(c.resolution=14);if(!c.channels||8<c.channels.length)throw"Invalid channels";if(c.oversample&&1<c.channels.length)throw"Can't oversample with >1 channel";if(c.samplerate&&1<c.channels.length)throw"Can't use samplerate with >1 channel";poke32(a.enable,0);for(var k=0;8>k;k++)poke32(1073771792+
16*k,0);c.channels.forEach(function(d,h){var g=1073771792+16*h;d.gain||(d.gain=1);d.tacq||(d.tacq=3);if(0>b.indexOf(d.pinpull))throw"Invalid pinpull";if(0>b.indexOf(d.npinpull))throw"Invalid npinpull";if(0>e.indexOf(d.gain))throw"Invalid gain";if(0>f.indexOf(d.tacq))throw"Invalid tacq";var l=b.indexOf(d.pinpull)|b.indexOf(d.npinpull)<<4|e.indexOf(d.gain)<<8|!!d.refvdd<<12|f.indexOf(d.tacq)<<16|(void 0!==d.npin)<<20|!!c.oversample<<24;poke32(g+8,l);poke32(g,0|(new Pin(d.pin)).getInfo().channel+1);
poke32(g+4,0|(d.npin&&(new Pin(d.npin)).getInfo().channel)+1)});poke32(1073772016,c.resolution-8>>1);poke32(1073772020,0|c.oversample);poke32(1073772024,c.samplerate|!!c.samplerate<<12);a.setDMA(c.dma);poke32(a.enable,1);return a};exports.rtc=function(c){var a=1073741824+4096*[8,17,36][c],b={eTick:1,eOverflow:2,eCmp0:65536,eCmp1:131072,eCmp2:262144,eCmp3:524288};return{counter:a+1284,prescaler:a+1288,cc:[a+1344,a+1348,a+1352,a+1356],tStart:a,tStop:a+4,tClear:a+8,tOverflow:a+12,eTick:a+256,eOverflow:a+
260,eCmp0:a+320,eCmp1:a+324,eCmp2:a+328,eCmp3:a+332,enableEvent:function(e){poke32(a+836,0|b[e])},disableEvent:function(e){poke32(a+840,0|b[e])}}};exports.ppiEnable=function(c,a,b){poke32(1073870096+8*c,a);poke32(1073870100+8*c,b);poke32(1073870084,1<<c)};exports.ppiDisable=function(c){poke32(1073870088,1<<c)};exports.ppiIsEnabled=function(c){return peek32(1073870080)>>c&1}