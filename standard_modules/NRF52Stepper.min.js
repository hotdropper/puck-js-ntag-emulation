var a=require("NRF52LL"),b=function(a){this.pin=a;this.stepTimer=this.stepTask=null};b.prototype.start=function(b,d){var c=16E6/b/2;this.stepTask=a.gpiote(4,{type:"task",pin:this.pin,lo2hi:1,hi2lo:1});this.stepTimer=a.timer(3,{type:"timer",bits:32,prescaler:0,cc:[c],cc0clear:1});this.counter=a.timer(2,{type:"counter",cc:[2*d],cc0clear:1});a.ppiEnable(0,this.stepTimer.eCompare[0],this.stepTask.tOut);a.ppiEnable(1,this.stepTimer.eCompare[0],this.counter.tCount);a.ppiEnable(2,this.counter.eCompare[0],
this.stepTimer.tStop);this.restart()};b.prototype.restart=function(){poke32(this.stepTimer.tClear,1);poke32(this.counter.tClear,1);this.resume()};b.prototype.pause=function(){poke32(this.stepTimer.tStop,1)};b.prototype.resume=function(){poke32(this.stepTimer.tStart,1)};b.prototype.setSpeed=function(a){a=16E6/a/2;poke32(this.stepTimer.cc[0],a);poke32(this.stepTimer.tCapture[1],1);peek32(this.stepTimer.cc[1])>=a&&poke32(this.stepTimer.tClear,1)};b.prototype.stop=function(){a.ppiDisable(0);a.ppiDisable(1);
a.ppiDisable(2)};b.prototype.readCounter=function(){poke32(this.counter.tCapture[1],1);return Math.floor(peek32(this.counter.cc[1])/2)};module.exports=b