var k=require("net");exports.ping=function(a,l){function e(b,a){var m=getTime(),g=k.connect({host:b.address,port:b.port},function(){var e=1E3*(getTime()-m);g.end();f++;c.push(e);clearTimeout(d);h(b,a)}),d=setTimeout(function(){g.end();f++;c.push(b.timeout+1);h(b,a)},b.timeout)}function h(a,d){if(f<a.attempts)e(a,d);else{var b=c.reduce(function(a,b){return a+b})/c.length;b>a.timeout?d(Error("Timeout"),void 0):d(void 0,{address:a.address,port:a.port,attempts:a.attempts,avg:b,max:Math.max.apply(null,
c),min:Math.min.apply(null,c),raw:c})}}"object"!=typeof a&&(a={});a.address=a.address||"localhost";a.port=a.port||80;a.attempts=a.attempts||5;a.timeout=a.timeout||5E3;var f=0,c=[];e(a,l)}