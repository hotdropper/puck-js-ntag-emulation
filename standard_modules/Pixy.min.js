function b(a){this.spi=a;this.skipStart=!1;this.outIndex=0;this.outBuf=void 0}b.prototype.getWord=function(){var a=0;if(this.outBuf){var c=this.spi.send(91);a=this.outBuf[this.outIndex++];this.outIndex==this.outLen&&(this.outBuf=void 0)}else c=this.spi.send(90);return c<<8|this.spi.send(a)};b.prototype.getByte=function(){return this.spi.send(0)};b.prototype.send=function(a){if(this.outBuf)return-1;this.outBuf=a;this.outIndex=0};b.prototype.getStart=function(){for(var a=65535;;){var c=
this.getWord();if(0===c&&0===a)return!1;if(43605==c&&43605==a)return!0;21930==c&&(console.log("reorder"),this.getByte());a=c}};b.prototype.getBlocks=function(){var a=[];if(this.skipStart)this.skipStart=!1;else if(!this.getStart())return[];for(;130>a.length;){var c=this.getWord();if(43605==c){this.skipStart=!0;break}else if(0===c)break;var b={id:this.getWord(),x:this.getWord(),y:this.getWord(),width:this.getWord(),height:this.getWord()};c==b.id+b.x+b.y+b.width+b.height?a.push(b):console.log("cs error");
if(43605!=this.getWord())break}return a};exports.connect=function(a){return new b(a)}