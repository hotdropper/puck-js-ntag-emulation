function c(a,b){this.spi=a;this.cs=b.cs;this.rst=b.rst;this.freq=b.freq in d?b.freq:434}var d={315:new Uint16Array([1870,2240,2304]),434:new Uint16Array([1900,2176,2304]),868:new Uint16Array([2009,2048,2304]),915:new Uint16Array([2020,2240,2304])},e=[[872,1067],[820,1045],[794,1035],[781,1029]],f=new Uint16Array([512,1282,1601,6482,11264,11525,11920,12202,12333,12756,14224,14402,15509,6280,22555,28464,260]),g=new Uint16Array([4511,9540,4880,23125,23664,272]),h=new Uint16Array([9476,4879,
23133,23676,268]);c.prototype.connect=function(a){this.rst&&digitalPulse(this.rst,1,100);var b=this;setTimeout(function(){b.w(47,170);if(170!=b.r(47))throw Error("RFM69 not found");b.w(47,85);if(85!=b.r(47))throw Error("RFM69 not found");d[434].forEach(b.w16.bind(b));e[0].forEach(b.w16.bind(b));f.forEach(b.w16.bind(b));a&&a()},100)};c.prototype.r=function(a){return this.spi.send([a&127,0],this.cs)[1]};c.prototype.w=function(a,b){this.spi.send([a|128,b],this.cs)};c.prototype.w16=function(a){this.spi.send([a>>
8|128,a],this.cs)};c.prototype.rxmode=function(){g.forEach(this.w16.bind(this))};c.prototype.hasPacket=function(){return!!(this.r(40)&4)};c.prototype.getPacket=function(){if(this.r(40)&4){this.w16(260);this.cs.reset();var a=this.spi.send([0,0])[1];a=this.spi.send(new Uint8Array(a));this.cs.set();this.w16(272);return a}};c.prototype.sendPacket=function(a,b){this.w16(260);var c=this;setTimeout(function(){c.spi.write(128,a.length,a,c.cs);h.forEach(c.w16.bind(c));var d=100,e=setInterval(function(){if(c.r(40)&
8||0>d--){c.w16(260);clearInterval(e);if(0>d)throw"Timeout in RF69 send";b&&b()}},10)},1)};exports.connect=function(a,b,d){a=new c(a,b);a.connect(d);return a}