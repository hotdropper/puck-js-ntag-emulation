function b(a,c){this.datapin=c;this.clockpin=a;this.timeout=this.ack=0;this.lastTemperature;this.lastHumidity;this.lastDewPoint}b.prototype.Delay=function(a){for(var c=Date().getTime();!(Date().getTime()-c>a););};b.prototype.clockTick=function(a){digitalWrite(this.clockpin,a);this.Delay(1)};b.prototype.sendCommand=function(a){digitalWrite(this.clockpin,0);digitalWrite(this.datapin,1);this.clockTick(1);digitalWrite(this.datapin,0);this.clockTick(0);this.clockTick(1);digitalWrite(this.datapin,
1);this.clockTick(0);for(var c=0;8>c;c++)digitalWrite(this.datapin,a&1<<7-c),this.clockTick(1),this.clockTick(0);this.clockTick(1);this.ack=digitalRead(this.datapin);this.clockTick(0);this.ack=digitalRead(this.datapin)};b.prototype.shiftIn=function(a){for(var c=0,b=0;b<a;b++)this.clockTick(1),c=2*c+digitalRead(this.datapin),this.clockTick(0);return c};b.prototype.getData=function(){var a=this.shiftIn(8);a*=256;digitalWrite(this.datapin,1);this.Delay(1);digitalWrite(this.datapin,0);this.clockTick(1);
this.clockTick(0);return a|=this.shiftIn(8)};b.prototype.skipCrc=function(){digitalWrite(this.datapin,1);this.clockTick(1);this.clockTick(0)};b.prototype.resetConnection=function(){digitalWrite(this.datapin,1);for(var a=0;10>a;a++)this.clockTick(1),this.clockTick(0)};b.prototype.readTemperature=function(){this.sendCommand(3);for(this.timeout=0;1==this.ack;){this.ack=digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}var a=this.getData();this.skipCrc();return this.lastTemperature=
.01*a+-39.65};b.prototype.readCompensatedHumidity=function(){this.lastTemperature=this.readTemperature();this.sendCommand(5);for(this.timeout=0;1==this.ack;){this.ack=digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}var a=this.getData();this.skipCrc();this.lastHumidity=-2.0468+.0367*a+-1.5955E-6*a*a;return this.lastHumidity=(this.lastTemperature-25)*(.01+8E-5*a)+this.lastHumidity};b.prototype.readHumidity=function(){this.sendCommand(5);for(this.timeout=0;1==this.ack;){this.ack=
digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}var a=this.getData();this.skipCrc();return this.lastHumidity=-2.0468+.0367*a+-1.5955E-6*a*a};b.prototype.calculateDewPoint=function(a,c){if(0<a){var b=243.12;var d=17.62}else b=272.62,d=22.46;return this.lastDewPoint=b*(Math.log(c/100)+d*a/(b+a))/(d-Math.log(c/100)-d*a/(b+a))};exports.connect=function(a,c){return new b(a,c)}