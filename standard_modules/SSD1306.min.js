function l(b){b&&(b.height&&(g[4]=b.height-1,g[15]=64==b.height||48==b.height?18:2,h[5]=(b.height>>3)-1),b.width&&(k=b.width,h[1]=(128-b.width)/2,h[2]=h[1]+b.width-1),void 0!==b.contrast&&(g[17]=b.contrast))}var k=128;var g=new Uint8Array([174,213,128,168,63,211,0,64,141,20,32,0,161,200,218,18,129,207,217,241,219,64,164,166,175]),h=[33,0,k-1,34,0,7];exports.connect=function(b,d,e){l(e);var f=Graphics.createArrayBuffer(k,g[4]+1,1,{vertical_byte:!0}),c=60;e&&(e.address&&(c=e.address),e.rst&&
digitalPulse(e.rst,0,10));setTimeout(function(){g.forEach(function(a){b.writeTo(c,[0,a])})},50);void 0!==d&&setTimeout(d,100);f.flip=function(){h.forEach(function(a){b.writeTo(c,[0,a])});var a=new Uint8Array(129);a[0]=64;for(var d=0;d<this.buffer.length;d+=128)a.set(new Uint8Array(this.buffer,d,128),1),b.writeTo(c,a)};f.setContrast=function(a){b.writeTo(c,0,129,a)};f.off=function(){b.writeTo(c,0,174)};f.on=function(){b.writeTo(c,0,175)};return f};exports.connectSPI=function(b,d,e,f,c){l(c);var a=
c?c.cs:void 0;c=Graphics.createArrayBuffer(k,g[4]+1,1,{vertical_byte:!0});e&&digitalPulse(e,0,10);setTimeout(function(){a&&digitalWrite(a,0);digitalWrite(d,0);b.write(g);digitalWrite(d,1);a&&digitalWrite(a,10);void 0!==f&&setTimeout(f,10)},50);c.flip=function(){a&&digitalWrite(a,0);digitalWrite(d,0);b.write(h);digitalWrite(d,1);b.write(this.buffer);a&&digitalWrite(a,1)};c.setContrast=function(c){a&&a.reset();b.write(129,c,d);a&&a.set()};c.off=function(){a&&a.reset();b.write(174,d);a&&a.set()};c.on=
function(){a&&a.reset();b.write(175,d);a&&a.set()};return c}