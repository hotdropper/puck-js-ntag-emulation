function b(a,c,b){this.spi=a;this.cs=c;this.en=b}var d=[3,67,35],e=[99,19,83],g=[115,11,75];exports.connect=function(a,c,k){return new b(a,c,k)};b.prototype.enable=function(){digitalWrite(this.cs,1);digitalWrite(this.en,1)};b.prototype.disable=function(){digitalWrite(this.en,0)};b.prototype.writeRegister=function(a,c){return this.spi.send([a|128,c],this.cs)};b.prototype.readRegister=function(a){return this.spi.send([a,0],this.cs)[1]};b.prototype.setDutyCycle=function(a,c){this.writeRegister(g[a-
1],c)};b.prototype.setPWMSource=function(a,c){--a;var b=c+4*c<<4*(a&1),h=15<<4*(a&1),f=e[a>>1],d=this.readRegister(f);this.writeRegister(f,d&~h|b)};b.prototype.setDirection=function(a,b){--a;var c=0;1===b?c=9:2===b&&(c=6);c<<=4*(a&1);var h=15<<4*(a&1),f=d[a>>1],e=this.readRegister(f);this.writeRegister(f,e&~h|c)};b.prototype.setPWMFrequency=function(a,b){--a;b=(b&3)<<2*(a&3);var c=3<<2*(a&3),d=this.readRegister(51);this.writeRegister(51,d&~c|b)};b.prototype.getOvercurrentFlags=function(){return this.readRegister(123)<<
16|this.readRegister(59)<<8|this.readRegister(91)};b.prototype.getOpenLoadFlags=function(){return this.readRegister(7)<<16|this.readRegister(71)<<8|this.readRegister(39)};b.prototype.logCtrlReg=function(){var a=console.log;a("- Settings -");a("HB_ACT_1_CTRL:   ",this.readRegister(d[0]).toString(16));a("HB_ACT_2_CTRL:   ",this.readRegister(d[1]).toString(16));a("HB_ACT_3_CTRL:   ",this.readRegister(d[2]).toString(16));a("HB_MODE_1_CTRL:  ",this.readRegister(e[0]).toString(16));a("HB_MODE_2_CTRL:  ",
this.readRegister(e[1]).toString(16));a("HB_MODE_3_CTRL:  ",this.readRegister(e[2]).toString(16));a("PWM_CH_FREQ_CTRL:",this.readRegister(51).toString(16));a("PWM1_DC_CTRL:    ",this.readRegister(g[0]).toString(16));a("PWM2_DC_CTRL:    ",this.readRegister(g[1]).toString(16));a("PWM3_DC_CTRL:    ",this.readRegister(g[2]).toString(16));a("FW_OL_CTRL:      ",this.readRegister(43).toString(16));a("FW_CTRL:         ",this.readRegister(107).toString(16));a("CONFIG_CTRL: ");switch(this.readRegister(103)){case 0:a("TLE94112EL chip");
break;case 1:a("TLE94110EL chip");break;case 2:a("TLE94108EL chip");break;case 3:a("TLE94106EL chip");break;case 4:a("TLE94104EP chip");break;case 5:a("TLE94103EP chip");break;default:a("unkonwn")}};b.prototype.logSysDiag=function(){var a=console.log;a("- System Diagnose -");a("SYS_DIAG_1:        ",this.readRegister(27).toString(16));a("Overcurrent:Flags: ",this.getOvercurrentFlags().toString(16));a("Open Load Flags:   ",this.getOpenLoadFlags().toString(16))}