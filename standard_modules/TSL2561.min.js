function b(a){this.i2c=a}b.prototype.C={FULLSPECTRUM:0,INFRARED:1,VISIBLE:2,LOW:41,FLOAT:57,HIGH:73,_13MS:0,_101MS:1,_402MS:2,_1X:0,_16X:16};b.prototype.enable=function(){this.i2c.writeTo(this.address,[128,3]);return this};b.prototype.disable=function(){this.i2c.writeTo(this.address,[128,0]);return this};b.prototype.setTiming=function(a){this.timing=a;this.i2c.writeTo(this.address,[129,this.timing|this.gain]);return this};b.prototype.setGain=function(a){this.gain=a;this.i2c.writeTo(this.address,
[129,this.timing|this.gain]);return this};b.prototype.init=function(a,f,c,d){this.address=a;this.timing=f;this.gain=c;this.irq_pin=d;this.i2c.writeTo(this.address,[128,3]);this.i2c.writeTo(this.address,[129,this.timing|this.gain]);d&&this.i2c.writeTo(this.address,[134,1]);this.i2c.writeTo(this.address,[128,0]);return this};var g=function(a,f){a.i2c.writeTo(a.address,160|(1===f?14:12));var c=a.i2c.readFrom(a.address,2);a.debug&&print(c);return c[1]<<8|c[0]},e=function(a,f,c){var d,b;f!=a.C.FULLSPECTRUM&&
(d=g(a,1));f!=a.C.INFRARED&&(b=g(a,0));void 0!==a.irq_pin&&a.i2c.writeTo(a.address,[192,1]);a.disable();a._rto=!1;switch(f){case a.C.INFRARED:c(d/e.scale);break;case a.C.VISIBLE:c((b-d)/e.scale);break;default:c(b/e.scale)}};b.prototype.getLuminosity=function(a,b){var c=this;if(this._rto)return console.log("TSL2561 COLLISION"),setTimeout(function(){b(null)},0),this._rto=!1,this;this._rto=!0;this.enable();var d;switch(this.timing){case this.C._13MS:e.scale=.034;d=14;break;case this.C._101MS:e.scale=
.252;d=102;break;default:e.scale=1,d=403}this._rto=void 0!==this.irq_pin?setWatch(function(){e(c,a,b)},this.irq_pin,{repeat:!1,edge:"rising"}):setTimeout(function(){e(c,a,b)},d);return this};exports.connect=function(a){return new b(a)}