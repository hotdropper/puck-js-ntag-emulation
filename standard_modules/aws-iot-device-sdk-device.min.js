var c=require("MQTT"),b=function(a){return"undefined"===typeof a||null===a?!0:!1};module.exports=function(a){if(b(a)||0===Object.keys(a).length)throw Error("Invalid connect options supplied.");b(a.reconnectPeriod)&&(a.reconnectPeriod=3E3);b(a.port)&&(a.port=8883);a.protocol="mqtts";if(b(a.host)){if(b(a.region))throw Error("Invalid connect options supplied.");a.host="data.iot."+a.region+".amazonaws.com"}b(a)||!0!==a.debug||(console.log(a),console.log("attempting new mqtt connection..."));
a=c.connect(a);a.on("error",function(a){if("EPROTO"===a.code)throw Error(a);});return a}